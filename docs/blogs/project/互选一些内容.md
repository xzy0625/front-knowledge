# 项目相关

## 表单配置

参考：https://juejin.cn/post/7119639489567260686?searchId=20241220180113BBFB8419351C6543C08A

### 背景

其实这个项目就是一个大的表单，通过表单去收集数据 / 转换 / 校验 / 提交。所以关键是如何管理数据和管理表单。

1. 通过将组件和数据分离的方式，通过hook像UI中注入对应的数据。

2. 将组件配置和数据放在一个hook中。使用的时候调用对应的hook获取配置 / 表单数据 / 表单数据更新函数

   - 结构和UI分离。不用写死组件。灵活性高
   - 逻辑归拢在一个hook中
   - 可以方便的组织组件结构。例如某个组件要在不同的场景展示在不同的地方。通过js的方式就可以实现。直接写死的方式需要访问两套UI

   不好的地方：

   - 不够直观

#### 配置化方式

**优点：**

1. **可维护性**：通过配置文件来定义表单，使得表单的结构和行为与UI表示分离，便于管理和维护。
2. **可复用性**：配置文件可以在不同的表单中重用，提高开发效率。
3. **动态性**：可以根据不同的需求动态生成表单，例如根据服务器返回的数据结构动态创建表单元素。
4. **易于测试**：配置化的结构使得单元测试更加方便，可以针对配置逻辑进行测试而无需关心UI实现细节。

**缺点：**

不够直观 / 需要了解配置规则和解析文件。

1. **学习成本**：需要开发者学习如何编写和解析配置文件。
2. **复杂性**：对于复杂的表单，配置文件可能变得难以管理和理解。
3. **性能考虑**：动态解析配置文件并生成UI可能会引入额外的性能开销。

#### 直接定义UI的方式

**优点：**

1. **直观性**：直接在代码中定义UI，开发者可以直接看到UI的结构，易于理解和修改。
2. **控制性**：开发者可以精确控制表单的每一个细节，对于复杂的UI交互和样式有更好的控制。
3. **性能优化**：避免了配置解析的过程，可能会有更好的性能表现。

**缺点：**

1. **可复用性差**：直接定义的UI较难在不同的项目或表单间复用。
2. **可维护性差**：随着项目的扩展，直接定义的表单可能变得难以维护，特别是当表单结构复杂或需要频繁修改时。
3. **测试困难**：直接与UI绑定的逻辑可能使得测试变得更加困难，尤其是在没有分离逻辑和UI时。

### 总结

选择哪种方式取决于项目的具体需求和团队的偏好。如果项目需要快速开发且表单结构变化不大，直接定义UI可能更合适。而对于需要高度动态生成且频繁变更的表单，配置化方式可能更有优势。在实际应用中，也可以根据具体情况结合使用这两种方法，以达到最佳的开发效率和用户体验。

### 具体实现

关键在于配置的设计，需要扩展好，后续改动小。

1. hook封装表单配置 / 表单数据 / 表单数据更新函数
2. 表单配置
   - 包含组件名 / props / 校验规则等等
3. 表单数据解析。编写一个Form组件。传入组件配置进行解析，并且调用数据更改函数(传入key，value)等
4. error提交的时候收集所有的rules然后进行校验













